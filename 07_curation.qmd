---
title: "Untitled"
format: html
---

# Curation

## Construction de la Spatial Amendment Table (SAT)

On documente ici la construction de la SAT, c’est à dire l’identification et la formalisation des géométries qui constituent des amendements spatiaux explicites par rapport à l’état courant décrit dans la WDPA.

La SAT ne vise pas à reconstituer exhaustivement l’historique spatial de toutes les aires protégées, mais à documenter de manière traçable et reproductible les cas où l’information spatiale disponible diverge de la WDPA, sur la base de sources légales, institutionnelles ou techniques identifiées.

Le principe général est le suivant: La WDPA est considérée comme l’état courant par défaut. Un amendement spatial est introduit uniquement lorsqu’une source indépendante, datée et justifiée indique une modification pertinente du périmètre ou de l’organisation spatiale d’une aire protégée.

### Identification des décisions légales impliquant une modification spatiale potentielle

La première porte d’entrée pour identifier des amendements spatiaux est constituée par les textes légaux recensés dans CNLEGIS. Certains types de décisions, en particulier celles qualifiées de modifiant, peuvent signaler une modification des limites ou du statut spatial d’une aire protégée.

Dans cette section, nous identifions les décisions légales qui mentionnent explicitement une modification, et les aires protégées concernées.

```{r}
library(tidyverse)
library(sf)
library(lubridate)
library(stringr)
library(tmap)
library(arrow)
library(geoarrow)
library(wdpar)

# Load WDPA for reference
wdpa_mdg <- wdpa_read("data/WDPA_WDOECM_Nov2025_Public_MDG.zip")

# Load legal decisions (FAT source)
pa_decisions <- read_rds("data/id/legal_texts.rds") |>
  mutate(
    cnlegis_url = ifelse(
      is.na(num_texte) | num_texte == "",
      NA_character_,
      paste0(
        "https://cnlegis.gov.mg/page_num_find_direct/?",
        utils::URLencode(num_texte, reserved = TRUE)
      )
    )
  )

# Filter decisions indicating a modification
modification_decisions <- pa_decisions |>
  filter(str_detect(type_decision, "modifiant"))

# List concerned protected areas
modification_decision_names <- modification_decisions |>
  distinct(WDPA_NAME) |>
  arrange(WDPA_NAME) |>
  pull(WDPA_NAME)

modification_decision_names
```

Nous identifions ainsi `r length(modification_decision_names)`  aires protégées pour lesquelles au moins une décision légale mentionne explicitement une modification.

Pour chaque décision légale identifiée comme potentiellement modificative, nous adoptons la logique suivante. Nous utilisons l'application interactive (Shiny) disponible dans le chapitre @sec-visual-verif. Nous observons la date et le contenu des décisions qui la concernent. Si les textes légaux indiquent bien une modification de périmètre, on passe en revue les données disponibles, afin d'identifier la source la plus crédible qui représente le périmètre précédent.

```{r}
tmap_mode("plot")
all_PAs_conso <- read_rds("data/id/all_PAs_conso.rds")

resolve_wdpaid <- function(wdpa_name_or_id, decisions) {
  # English: accept WDPAID (numeric) or WDPA_NAME (character) and return a single WDPAID
  if (is.numeric(wdpa_name_or_id)) {
    return(wdpa_name_or_id[1])
  }
  wdpaid <- decisions %>%
    filter(WDPA_NAME == wdpa_name_or_id) %>%
    pull(WDPAID) %>%
    first()
  if (is.na(wdpaid)) {
    stop("WDPAID introuvable pour: ", wdpa_name_or_id)
  }
  wdpaid
}

show_cnlegis_for_pa <- function(wdpa_name_or_id, decisions, pattern = NULL) {
  # English: show all CNLEGIS decisions for a PA, optionally filter by a pattern on type_decision
  wdpaid <- resolve_wdpaid(wdpa_name_or_id, decisions)

  out <- decisions %>%
    filter(WDPAID == wdpaid) %>%
    select(
      WDPA_NAME,
      WDPAID,
      date_texte,
      type_texte,
      num_texte,
      type_decision,
      id_texte,
      objet_texte,
      cnlegis_url
    ) %>%
    arrange(date_texte)

  if (!is.null(pattern)) {
    out <- out %>% filter(str_detect(type_decision, pattern))
  }

  out
}

plot_pa_sources <- function(
  wdpa_name,
  data = all_PAs_conso,
  decisions = pa_decisions,
  wdpa_historical_path = "data/MDG_WDPA_Consolidated.parquet",
  sources = NULL
) {
  # Check if input is a WDPAID (integer) or name (string)
  if (is.numeric(wdpa_name)) {
    wdpaid <- wdpa_name
  } else {
    # Look up the WDPAID from pa_decisions
    wdpaid <- decisions %>%
      filter(WDPA_NAME == wdpa_name) %>%
      pull(WDPAID) %>%
      first()

    # Check if WDPAID was found
    if (is.na(wdpaid)) {
      message("No WDPAID found in pa_decisions for: ", wdpa_name)
      return(NULL)
    }
  }

  # Filter all observations matching this WDPAID from all_PAs_conso
  pa_subset <- data %>%
    filter(WDPAID == wdpaid)

  # Load and filter WDPA historical data
  wdpa_historical <- read_parquet(wdpa_historical_path) %>%
    mutate(geometry = st_as_sfc(geometry)) %>%
    st_as_sf() %>%
    filter(WDPAID == wdpaid) %>%
    mutate(dataset_id = paste0("WDPA_", data_year)) %>%
    st_transform(st_crs(pa_subset))

  # Combine both datasets
  pa_subset <- bind_rows(pa_subset, wdpa_historical)

  # Filter by specified sources if provided
  if (!is.null(sources) && length(sources) > 0) {
    pa_subset <- pa_subset %>%
      filter(dataset_id %in% sources) %>%
      # Convert to factor with levels in the order specified by sources
      mutate(dataset_id = factor(dataset_id, levels = sources))
  }

  # Check if any results found
  if (nrow(pa_subset) == 0) {
    message("No protected area found with WDPAID: ", wdpaid)
    return(NULL)
  }

  # Get summary information
  n_obs <- nrow(pa_subset)
  datasets <- unique(pa_subset$dataset_id)

  # Print summary
  cat("\n=== ", wdpa_name, " ===\n")
  cat("WDPAID:", wdpaid, "\n")
  cat("Number of representations:", n_obs, "\n")
  cat("Datasets:", paste(datasets, collapse = ", "), "\n\n")

  # Create static plot map with all geometries in one layer (tmap v4 syntax)
  tmap_mode("plot")

  map <- tm_shape(pa_subset) +
    tm_polygons(
      fill = "dataset_id",
      fill_alpha = 0.5,
      col = "black",
      lwd = 1,
      fill.scale = tm_scale(values = "brewer.set2"),
      fill.legend = tm_legend(
        title = "Data Source",
        position = tm_pos_out("right")
      )
    ) +
    tm_title(wdpa_name)

  return(map)
}

# Add a spatial amendment to SAT based on a legal decision
#
# This function creates a SAT entry documenting a historical boundary or
# internal zone that differs from the current WDPA representation. It links
# a geometry from curated spatial sources to a legal decision that marks
# when this geometry ceased to be valid.
#
# Parameters:
#   sat: Existing SAT table (sf object) or NULL to initialize
#   data: Consolidated spatial dataset (e.g., all_PAs_conso) containing
#         multiple representations of PAs from different sources
#   decisions: Legal decisions table with WDPAID linkage (e.g., pa_decisions)
#   wdpa_name_or_id: Either WDPAID (numeric) or WDPA_NAME (character)
#   decision_filter: Named list to identify the legal decision, can include:
#                    - year: numeric year of decision
#                    - type_decision_pattern: regex pattern for type_decision
#                    - num_texte: exact legal instrument number
#                    - id_texte: exact decision ID
#   source_dataset_id: The dataset_id in 'data' containing the historical geometry
#   amendment_type: Type of spatial amendment. Allowed values:
#                   - "boundary_modification": Legal change to external boundaries
#                   - "internal_zoning": Addition/modification of internal zones
#                   - "correction": Data correction (wrong geometry in WDPA)
#   valid_from: Optional start date (Date or character). If NULL, remains NA
#   confidence: Confidence level ("high", "medium", "low")
#   verification_method: Method used to verify the geometry
#   verified_by: Who performed verification
#   notes: Optional notes (defaults to decision object text)
#
# Returns:
#   Updated SAT table (sf object) with new amendment(s) appended
add_modif_sat <- function(
  sat,
  data,
  decisions,
  wdpa_name_or_id,
  decision_filter,
  source_dataset_id,
  amendment_type = "boundary_modification",
  valid_from = NULL,
  confidence = "medium",
  verification_method = "visual_verification_shiny",
  verified_by = "project_team",
  notes = NULL
) {
  # Helper: accept WDPAID (numeric) or WDPA_NAME (character) and return a single WDPAID
  resolve_wdpaid <- function(wdpa_name_or_id, decisions) {
    if (is.numeric(wdpa_name_or_id)) {
      return(wdpa_name_or_id[1])
    }
    wdpaid <- decisions %>%
      filter(WDPA_NAME == wdpa_name_or_id) %>%
      pull(WDPAID) %>%
      first()
    if (is.na(wdpaid)) {
      stop("WDPAID introuvable pour: ", wdpa_name_or_id)
    }
    wdpaid
  }

  if (!is.list(decision_filter)) {
    stop("decision_filter doit être une liste.")
  }

  # Validate amendment_type for SAT
  allowed_types_sat <- c(
    "boundary_modification",
    "internal_zoning",
    "correction"
  )
  if (!amendment_type %in% allowed_types_sat) {
    stop(
      "amendment_type must be one of: ",
      paste(allowed_types_sat, collapse = ", "),
      ". Got: ",
      amendment_type
    )
  }

  wdpaid <- resolve_wdpaid(wdpa_name_or_id, decisions)

  # Select exactly one legal decision based on filters
  dec <- decisions %>%
    filter(WDPAID == wdpaid)

  if (!is.null(decision_filter$year)) {
    dec <- dec %>% filter(lubridate::year(date_texte) == decision_filter$year)
  }
  if (!is.null(decision_filter$type_decision_pattern)) {
    dec <- dec %>%
      filter(str_detect(type_decision, decision_filter$type_decision_pattern))
  }
  if (!is.null(decision_filter$num_texte)) {
    dec <- dec %>% filter(num_texte == decision_filter$num_texte)
  }
  if (!is.null(decision_filter$id_texte)) {
    dec <- dec %>% filter(id_texte == decision_filter$id_texte)
  }

  dec <- dec %>% arrange(date_texte)

  if (nrow(dec) == 0) {
    stop("Aucune décision CNLEGIS ne correspond au filtre pour WDPAID=", wdpaid)
  }
  if (nrow(dec) > 1) {
    stop(
      "Filtre CNLEGIS ambigu: plusieurs décisions correspondent. Raffiner decision_filter."
    )
  }

  # Extract historical geometry from consolidated spatial data
  geom_before <- data %>%
    filter(WDPAID == wdpaid, dataset_id == source_dataset_id) %>%
    filter(dataset_id != "CNLEGIS_2024") %>%
    st_zm(drop = TRUE, what = "ZM") %>%
    st_make_valid()

  if (nrow(geom_before) == 0) {
    stop(
      "Aucune géométrie trouvée pour source_dataset_id=",
      source_dataset_id,
      " et WDPAID=",
      wdpaid
    )
  }

  # Build SAT entry with geometry and metadata
  sat_entry <- geom_before %>%
    mutate(
      WDPAID = wdpaid,
      amendment_type = amendment_type,
      valid_from = if (!is.null(valid_from)) {
        as.Date(valid_from)
      } else {
        as.Date(NA)
      },
      valid_to = dec$date_texte[1],
      date_precision = "day",
      data_source = source_dataset_id,
      legal_source = dec$num_texte[1],
      cnlegis_url = if ("cnlegis_url" %in% names(dec)) {
        dec$cnlegis_url[1]
      } else {
        NA_character_
      },
      verification_method = verification_method,
      verified_by = verified_by,
      verification_date = Sys.Date(),
      notes = ifelse(is.null(notes), dec$objet_texte[1], notes),
      confidence = confidence
    ) %>%
    select(
      WDPAID,
      geometry,
      amendment_type,
      valid_from,
      valid_to,
      date_precision,
      data_source,
      legal_source,
      cnlegis_url,
      verification_method,
      verified_by,
      verification_date,
      notes,
      confidence
    )

  # Initialize or append to SAT
  if (is.null(sat)) {
    sat_new <- sat_entry
  } else {
    sat_new <- bind_rows(sat, sat_entry)
  }

  # Assign stable sequential amendment_id
  sat_new <- sat_new %>%
    mutate(amendment_id = row_number()) %>%
    relocate(amendment_id, .before = WDPAID)

  sat_new
}

# Add attribute amendments to FAT based on a legal decision
#
# This function creates FAT entries documenting historical attribute states
# that differ from current WDPA representation. It uses a wide format where
# each amendment is a single row with one column per WDPA attribute that may
# have changed.
#
# Parameters:
#   fat: Existing FAT table (tibble) or NULL to initialize
#   decisions: Legal decisions table with WDPAID linkage (e.g., pa_decisions)
#   wdpa_name_or_id: Either WDPAID (numeric) or WDPA_NAME (character)
#   decision_filter: Named list to identify the legal decision (optional if using manual_decision), can include:
#                    - year: numeric year of decision
#                    - type_decision_pattern: regex pattern for type_decision
#                    - num_texte: exact legal instrument number
#                    - id_texte: exact decision ID
#                    Set to NULL when using manual_decision.
#   manual_decision: Optional named list for decisions not in CNLEGIS. Must include:
#                    - date_texte: Date of the legal instrument (Date or character)
#                    - type_texte: Type of legal instrument (e.g., "décret", "arrêté")
#                    - num_texte: Legal instrument number
#                    Optionally: id_texte, objet_texte
#   attributes: Named list of attribute changes, e.g.:
#               list(DESIG = "Réserve Naturelle Intégrale", IUCN_CAT = "Ia")
#               Only attributes that differ from WDPA should be provided.
#   amendment_type: Type of attribute amendment. Allowed values:
#                   - "status_change": Change in designation type (RNI → PN, etc.)
#                   - "governance_change": Change in management authority
#                   - "correction": Data correction (wrong attribute in WDPA)
#   valid_from: Optional start date (Date or character). If NULL, remains NA
#   confidence: Confidence level ("high", "medium", "low")
#   verification_method: Method used to verify the attributes
#   verified_by: Who performed verification
#   secondary_reference: Optional citation (e.g., "Goodman et al. 2018" or URL)
#   notes: Optional notes (defaults to decision object text)
#
# Returns:
#   Updated FAT table (tibble) with new amendment row appended. Unspecified
#   WDPA attributes are set to NA (will inherit from WDPA in CAR).

add_modif_fat <- function(
  fat,
  decisions,
  wdpa_name_or_id,
  decision_filter = NULL,
  manual_decision = NULL,
  attributes,
  amendment_type = "status_change",
  valid_from = NULL,
  confidence = "medium",
  verification_method = "legal_text_analysis",
  verified_by = "project_team",
  secondary_reference = NULL,
  notes = NULL
) {
  resolve_wdpaid <- function(wdpa_name_or_id, decisions) {
    if (is.numeric(wdpa_name_or_id)) {
      return(wdpa_name_or_id[1])
    }
    wdpaid <- decisions %>%
      filter(WDPA_NAME == wdpa_name_or_id) %>%
      pull(WDPAID) %>%
      first()
    if (is.na(wdpaid)) {
      stop("WDPAID introuvable pour: ", wdpa_name_or_id)
    }
    wdpaid
  }

  # Validate that either decision_filter or manual_decision is provided
  if (is.null(decision_filter) && is.null(manual_decision)) {
    stop("Either decision_filter or manual_decision must be provided.")
  }
  if (!is.null(decision_filter) && !is.null(manual_decision)) {
    stop("Cannot use both decision_filter and manual_decision. Choose one.")
  }

  # Validate amendment_type for FAT
  allowed_types_fat <- c("status_change", "governance_change", "correction")
  if (!amendment_type %in% allowed_types_fat) {
    stop(
      "amendment_type must be one of: ",
      paste(allowed_types_fat, collapse = ", "),
      ". Got: ",
      amendment_type
    )
  }

  wdpaid <- resolve_wdpaid(wdpa_name_or_id, decisions)

  # Handle manual decision (not in CNLEGIS)
  if (!is.null(manual_decision)) {
    if (!is.list(manual_decision)) {
      stop("manual_decision must be a list.")
    }
    required_fields <- c("date_texte", "type_texte", "num_texte")
    missing <- setdiff(required_fields, names(manual_decision))
    if (length(missing) > 0) {
      stop("manual_decision missing required fields: ", paste(missing, collapse = ", "))
    }
    
    dec <- tibble(
      date_texte = as.Date(manual_decision$date_texte),
      type_texte = manual_decision$type_texte,
      num_texte = manual_decision$num_texte,
      id_texte = manual_decision$id_texte %||% NA_character_,
      objet_texte = manual_decision$objet_texte %||% NA_character_
    )
  } else {
    # Handle CNLEGIS decision
    if (!is.list(decision_filter)) {
      stop("decision_filter doit être une liste.")
    }
    
    # Select exactly one legal decision based on filters
    dec <- decisions %>%
      filter(WDPAID == wdpaid)

    if (!is.null(decision_filter$year)) {
      dec <- dec %>% filter(lubridate::year(date_texte) == decision_filter$year)
    }
    if (!is.null(decision_filter$type_decision_pattern)) {
      dec <- dec %>%
        filter(str_detect(type_decision, decision_filter$type_decision_pattern))
    }
    if (!is.null(decision_filter$num_texte)) {
      dec <- dec %>% filter(num_texte == decision_filter$num_texte)
    }
    if (!is.null(decision_filter$id_texte)) {
      dec <- dec %>% filter(id_texte == decision_filter$id_texte)
    }

    dec <- dec %>% arrange(date_texte)

    if (nrow(dec) == 0) {
      stop("Aucune décision CNLEGIS ne correspond au filtre pour WDPAID=", wdpaid)
    }
    if (nrow(dec) > 1) {
      stop("Filtre CNLEGIS ambigu: plusieurs décisions correspondent.")
    }
  }

  # Determine date precision
  date_precision <- if (!is.na(dec$date_texte[1])) {
    "day"
  } else if (!is.na(lubridate::year(dec$date_texte[1]))) {
    "year"
  } else {
    NA_character_
  }

  # Define all possible WDPA attributes (wide format columns)
  wdpa_attributes <- c(
    "WDPA_PID",
    "PA_DEF",
    "NAME",
    "ORIG_NAME",
    "DESIG",
    "DESIG_ENG",
    "DESIG_TYPE",
    "IUCN_CAT",
    "INT_CRIT",
    "MARINE",
    "REP_M_AREA",
    "REP_AREA",
    "NO_TAKE",
    "NO_TK_AREA",
    "STATUS",
    "STATUS_YR",
    "GOV_TYPE",
    "OWN_TYPE",
    "MANG_AUTH",
    "MANG_PLAN",
    "VERIF",
    "METADATAID",
    "SUB_LOC",
    "PARENT_ISO3",
    "ISO3",
    "SUPP_INFO",
    "CONS_OBJ"
  )

  # Determine legal instrument source
  legal_source <- if (!is.null(manual_decision)) {
    "manual"
  } else {
    "CNLEGIS"
  }

  # Create base FAT entry with metadata
  fat_entry <- tibble(
    WDPAID = wdpaid,
    valid_from = if (!is.null(valid_from)) {
      as.Date(valid_from)
    } else {
      as.Date(NA)
    },
    valid_to = dec$date_texte[1],
    date_precision = date_precision,
    legal_instrument_type = tolower(dec$type_texte[1]),
    legal_instrument_number = dec$num_texte[1],
    legal_instrument_date = dec$date_texte[1],
    legal_instrument_source = legal_source,
    legal_instrument_id = if (!is.null(manual_decision)) {
      dec$id_texte[1]
    } else if ("cnlegis_url" %in% names(dec)) {
      dec$id_texte[1]
    } else {
      NA_character_
    },
    legal_instrument_url = if (!is.null(manual_decision)) {
      NA_character_
    } else if ("cnlegis_url" %in% names(dec)) {
      dec$cnlegis_url[1]
    } else {
      NA_character_
    },
    secondary_reference = ifelse(
      is.null(secondary_reference),
      NA_character_,
      secondary_reference
    ),
    amendment_type = amendment_type,
    verification_method = verification_method,
    verified_by = verified_by,
    verification_date = Sys.Date(),
    confidence = confidence,
    notes = ifelse(
      is.null(notes),
      if (!is.na(dec$objet_texte[1])) dec$objet_texte[1] else NA_character_,
      notes
    )
  )
      notes
    )
  )

  # Add WDPA attribute columns (all NA initially)
  for (attr in wdpa_attributes) {
    fat_entry[[attr]] <- NA_character_
  }

  # Populate provided attributes
  for (attr_name in names(attributes)) {
    if (attr_name %in% wdpa_attributes) {
      fat_entry[[attr_name]] <- as.character(attributes[[attr_name]])
    } else {
      warning(
        "Attribute '",
        attr_name,
        "' is not a recognized WDPA field and will be ignored."
      )
    }
  }

  # Reorder columns: metadata first, then WDPA attributes
  fat_entry <- fat_entry %>%
    select(
      WDPAID,
      valid_from,
      valid_to,
      date_precision,
      all_of(wdpa_attributes),
      legal_instrument_type,
      legal_instrument_number,
      legal_instrument_date,
      legal_instrument_source,
      legal_instrument_id,
      legal_instrument_url,
      secondary_reference,
      amendment_type,
      verification_method,
      verified_by,
      verification_date,
      confidence,
      notes
    )

  # Initialize or append to FAT
  if (is.null(fat)) {
    fat_new <- fat_entry
  } else {
    fat_new <- bind_rows(fat, fat_entry)
  }

  # Assign stable sequential amendment_id
  fat_new <- fat_new %>%
    mutate(amendment_id = row_number()) %>%
    relocate(amendment_id, .before = WDPAID)

  fat_new
}

```

#### Ambatovaky

Goodman et al. [-@goodman2018] indique pour cette AP:

> Aspects	légaux	:	Gestionnaire	actuel	:	Madagascar	National	Parks	(MNP)	;
Gestion	antérieure	:	aucune	;	Création	:	selon	le	Décret	n°	58-10	du	28
octobre	1958	(Création	de	la	Réserve	Spéciale)	;	Modification	de	statut	:
Ambatovaky	fut	institué	en	réserve	spéciale	en	1958	selon	le	Décret	n°	58-10
du	28	octobre	1958.	Les	limites	de	l’aire	protégée	ne	furent	précisées	qu’en
1965	avec	l’Arrêté	n°	1036/MFR/FOR	du	1	avril	1965	(60	050	ha)	puis
modifiées	en	2015	suivant	le	Décret	n°	2015-731	du	21	avril	2015	;	Dernière
modification	de	statut	:	suivant	le	Décret	n°	2015-731	du	21	avril	2015	;
Surface	actuelle	:	78	139	ha	(selon	le	décret	en	vigueur).


L'attibut STATUS_YR d'Ambatovaky indiquent qu'elle a été créée en 1958, mais au moins une décision a modifié son statut depuis : 

```{r}
show_cnlegis_for_pa("Ambatovaky", pa_decisions, pattern = "modifiant") %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

Le périmètre correspondant à l'étendue de l'AP avant 2015 est celui fourni par de MNP.

```{r}
plot_pa_sources(
  "Ambatovaky",
  sources = c("WDPA_2025", "MNP_2010")
)
```

On retient comme géométrie avant 2015 la meilleure source spatiale identifiée dans `all_PAs_conso` (ici `MNP_2010`), en attendant la vérification du périmètre alternatif (ANGAP 2002 / WDPA archives).

```{r}
sat <- NULL |>
  add_modif_sat(
    data = all_PAs_conso,
    decisions = pa_decisions,
    wdpa_name_or_id = "Ambatovaky",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    source_dataset_id = "MNP_2010",
    notes = "Périmètre antérieur au décret modifiant (géométrie MNP_2010 retenue après vérification visuelle)."
  )

```


#### Analamazaotra 


Goodman et al. [-@goodman2018] indique pour cette AP:

> Aspects	légaux	:	Gestionnaire	actuel	:	Madagascar	National	Parks	(MNP)	; 
Gestion	antérieure	:	Direction	des	Eaux	et	Forêts	(Service	de	la	Protection
de	la	Nature	d’Antananarivo	et	le	Cantonnement	Forestier	de
Moramanga)	;	Création	:	selon	le	Arrêté	n°	2778/MAER/SEGREF/FOR	du
21	juillet	1970	;	Modification	de	statut	:	l’ancienne	Station	Forestière
d’Analamazaotra,	composée	de	deux	parcelles,	ainsi	que	la	Réserve	de
faune	pour	Indris	existant	depuis	1970	(Arrêté	n°
2778/MAER/SEGREF/FOR)	constituent	le	parc	national	créé	en	2015,	selon
le	Décret	n°	2015-732	du	21	avril	2015	;	Dernière	modification	de	statut	:
suivant	le	Décret	n°	2015-732	du	21	avril	2015	;	Surface	actuelle	:	874	ha
(selon	le	décret	en	vigueur).

Les métadonnées indiquent que cette aire protégée a été créée en 1970 (Arrêté 2778/70), puis modifiée en 2015 :

```{r}
show_cnlegis_for_pa(5021, pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

Après inspection visuelle des différentes sources disponibles, on retient SAPM 2010 comme source des limites avant la modification de 2015.

```{r}
plot_pa_sources(
  "Analamazaotra",
  sources = c("WDPA_2025", "SAPM_2010")
)
```

Conformément aux règles de construction de la SAT, seule la géométrie immédiatement antérieure à la modification de 2015 est ajoutée comme amendement spatial.

```{r}
sat <- sat |>
  add_modif_sat(
    data = all_PAs_conso,
    decisions = pa_decisions,
    wdpa_name_or_id = "Analamazaotra",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    source_dataset_id = "SAPM_2010",
    valid_from = "1970-07-21",
    notes = "Périmètre antérieur au décret modifiant (géométrie SAPM_2010 retenue après vérification visuelle)."
  )
```

L'année de création de cette AP est 1970 (pas 2015 comme indiqué dans la WDPA 2025). On corrige STATUS_YR dans FAT.

```{r}
fat <- fat %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Analamazaotra",
    decision_filter = list(year = 1970, num_texte = "2778/70"),
    attributes = list(
      STATUS_YR = "1970"
    ),
    amendment_type = "correction",
    valid_from = "1970-07-21",
    notes = "WDPA incorrectly shows STATUS_YR=2015 (date of upgrade to PN). Actual creation was 1970 as wildlife reserve for Indris."
  )
```

#### Andohahela 

Goodman et al. [-@goodman2018] indique pour cette AP:

> Aspects	légaux	:	Gestionnaire	actuel	:	Madagascar	National	Parks	(MNP)	;
Gestion	antérieure	:	Direction	des	Eaux	et	Forêts	(Service	de	la	Protection
de	la	Nature	d’Antananarivo	et	le	Cantonnement	Forestier	de	Tolagnaro)	;
Création	:	selon	le	Décret	du	11	juin	1939	(Création	de	la	Réserve	Naturelle
Intégrale	n°	11)	;	Modification	de	statut	:	la	Réserve	Naturelle	Intégrale
d’Andohahela	fut	créée	en	1939	suivant	le	Décret	du	11	juin	1939	et	ses
limites	ont	été	définies	en	1966	avec	Décret	n°	66-242	du	1	juin	1966.	Cette
aire	protégée	a	la	particularité	d’être	constituée	de	trois	parcelles
adjacentes.	En	2002,	elle	subit	un	déclassement	en	parc	national	selon	le
Décret	n°	97-1043	du	7	août	2002.	Le	Décret	n°	2015-785	du	28	avril	2015
apporte	un	léger	changement	de	limites	aux	trois	parcelles	qui	composaient
déjà	l’aire	protégée	(Parcelle	I	:	62	124	ha	;	Parcelle	II	:	13	759	ha	;	Parcelle
III	:	437	ha)	;	Dernière	modification	de	statut	:	suivant	le	Décret	n°	2015-
785	du	28	avril	2015	;	Surface	actuelle	:	76	140	ha	(selon	le	décret	en
vigueur).

NB : Il y a visiblement une erreur dans le texte, le décret 97-1043 date de 1997, pas 2002. Ce décret n'était pas disponible dans CNLEGIS, mais a été retrouvé et archivé à l'adresse : https://archive.org/details/decret-n-97-1043-du-07-aout-1997-pn-andoahahela

Les sources secondaires indiquent qu’Andohahela a connu plusieurs évolutions juridiques et spatiales depuis sa création initiale. Créée en 1939 comme Réserve Naturelle Intégrale, l’aire protégée a vu ses limites précisées en 1966, puis son statut modifié en 1997 (Décret n° 97-1043) lors de son déclassement en Parc National. Ces événements sont antérieurs à la disponibilité de données spatiales numériques homogènes et ne peuvent donc pas être documentés directement dans la Spatial Amendment Table.

Les textes réglementaires récents identifiés dans CNLEGIS confirment en revanche une modification explicite des limites en 2015, par l’Arrêté n°2015-785 du 28 avril 2015, portant modification des limites du Parc National d’Andohahela. On la retrouve bien dans nos données CNLEGIS :

```{r}
show_cnlegis_for_pa("Andohahela", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

Cette décision juridique constitue un déclencheur clair pour l’introduction d’un amendement spatial dans la SAT.
On trouve plusieurs périmètres distincts dans les données. D'après les cartes disponible dans le plan d'aménagement et de gestion d'Andohahela datant de 2012, les polygones inclus dans SAPM 2010 sont ceux qui correspondent aux délimitations utilisées avant 2015. 

```{r}
plot_pa_sources(
  "Andohahela",
  sources = c("WDPA_2025", "SAPM_evol_2001-2011")
)
```

Conformément aux règles de construction de la SAT, seule la géométrie immédiatement antérieure à la modification de 2015 est retenue comme amendement spatial documenté.

```{r}
sat <- sat |>
  add_modif_sat(
    data = all_PAs_conso,
    decisions = pa_decisions,
    wdpa_name_or_id = "Andohahela",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    source_dataset_id = "SAPM_evol_2001-2011",
    notes = "Périmètre antérieur au décret modifiant (géométrie SAPM_2010 retenue après vérification visuelle)."
  )
```

Le changement de statut de 1997 (RNI → PN) constitue un changement d'attributs à documenter dans FAT. Bien que ce décret ne soit pas référencé dans CNLEGIS, il a été retrouvé et archivé.

```{r}
fat <- fat %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Andohahela",
    manual_decision = list(
      date_texte = "1997-08-07",
      type_texte = "Décret",
      num_texte = "97-1043",
      objet_texte = "Portant déclassement	en	parc	national"
    ),
    attributes = list(
      DESIG = "Réserve Naturelle Intégrale",
      DESIG_ENG = "Strict Nature Reserve",
      DESIG_TYPE = "National",
      IUCN_CAT = "Ia"
    ),
    amendment_type = "status_change",
    valid_from = "1966-06-01",
    secondary_reference = "https://archive.org/details/decret-n-97-1043-du-07-aout-1997-pn-andoahahela",
    notes = "RNI #11 transformed to PN in 1997 (Décret 97-1043 du 7 août 1997). Three-parcel structure maintained. Decree not in CNLEGIS but archived independently."
  ) %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Andohahela",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    attributes = list(
      STATUS_YR = "1939"
    ),
    amendment_type = "correction",
    valid_from = "1939-06-11",
    notes = "WDPA incorrectly shows STATUS_YR=2015 (date of PN creation). Actual creation was 1939 as RNI #11 (Décret du 11 juin 1939)."
  )
```

#### Andringitra

Goodman et al. [-@goodman2018] indique pour cette AP:

> Aspects	légaux	:	Gestionnaire	actuel	:	Madagascar	National	Parks	(MNP)	;
Gestion	antérieure	:	Direction	des	Eaux	et	Forêts	(Service	de	la	Protection
de	la	Nature	d’Antananarivo	et	le	Cantonnement	Forestier	d’Ambalavao)	;
Création	:	selon	le	Décret	du	31	décembre	1927	(Création	de	la	Réserve
Naturelle	Intégrale	n°	5)	;	Modification	de	statut	:	la	Réserve	Naturelle
Intégrale	d’Andringitra	fut	mise	en	place	en	1927	suivant	le	Décret	du	31
décembre	1927	et	ses	limites	ont	été	fixées	en	1966	avec	le	Décret	n°	66-242
du	1	juin	1966.	L’aire	protégée	subit	un	changement	de	statut	en	1998	avec
le	Décret	n°	98-376	du	19	août	1998	et	devient	un	parc	national	;	Dernière
modification	de	statut	:	suivant	le	Décret	n°	98-376	du	19	août	1998	;
Surface	actuelle	:	31	160	ha	(selon	le	décret	en	vigueur).

Les métadonnées indiquent que cette aire protégée a été créée en 1927 comme RNI #5, puis ses limites ont été fixées en 1966, avant un changement de statut en 1998:

```{r}
andringitra_decision <- pa_decisions %>%
  filter(WDPAID == 2308) %>%
  select(date_texte, type_texte, type_decision, id_texte, objet_texte)
print(list(
  select(andringitra_decision, -objet_texte),
  andringitra_decision$objet_texte
))
```

La modification survenue en 1998 ne porte pas sur un changement de frontière mais sur un changement de statut juridique (de RNI à PN). Aucun amendement spatial n'est donc nécessaire. On documente le changement de statut dans FAT.

```{r}
fat <- fat %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Andringitra",
    decision_filter = list(year = 1998, type_decision_pattern = "modifiant"),
    attributes = list(
      DESIG = "Réserve Naturelle Intégrale",
      DESIG_ENG = "Strict Nature Reserve",
      DESIG_TYPE = "National",
      IUCN_CAT = "Ia"
    ),
    amendment_type = "status_change",
    valid_from = "1966-06-01",
    notes = "RNI #5 transformed to PN in 1998 (Décret 98-376 du 19 août 1998). Boundaries remained unchanged from 1966 delimitation."
  ) %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Andringitra",
    decision_filter = list(year = 1998, type_decision_pattern = "modifiant"),
    attributes = list(
      STATUS_YR = "1927"
    ),
    amendment_type = "correction",
    valid_from = "1927-12-31",
    notes = "WDPA incorrectly shows STATUS_YR=1998 (date of PN upgrade). Actual creation was 1927 as RNI #5 (Décret du 31 décembre 1927)."
  )
```

#### Anjanaharibe_sud

Goodman et al. [-@goodman2018] indique pour cette AP:
> Aspect	légaux	:	Gestionnaire	actuel	:	Madagascar	National	Parks	(MNP)	;
Gestion	antérieure	:	Direction	des	Eaux	et	Forêts	(Service	de	la	Protection
de	la	Nature	d’Antananarivo	et	le	Cantonnement	Forestier	d’Andapa).	Le
PCDI	Marojejy	/	Anjanaharibe-Sud	était	installé	en	1993	et	la	gestion	de	ces
deux	sites	a	connu	des	phases	successives	:	au	cours	de	la	première,	elle	a	été
gérée	conjointement	par	la	Direction	des	Eaux	et	Forêts	et	le	WWF	et
durant	la	deuxième,	l’opérateur	principal	pour	sa	gestion	était	le	WWF,
sous	la	coordination	de	l’Association	Nationale	pour	la	Gestion	des	Aires
Protégées.	;	Création	:	selon	le	Décret	n°	58-12	du	28	octobre	1958	(Création
de	la	Réserve	Spéciale)	;	Modification	de	statut	:	créée	en	1958	suivant	le
Décret	n°	58-12	du	28	octobre	1958,	la	Réserve	Spéciale	d’Anjanaharibe-
Sud	subit	un	changement	de	limites	sous	le	Décret	n°	2015-729	du	21	avril
2015	;	Dernière	modification	de	statut	:	suivant	le	Décret	n°	2015-729	du	21
avril	2015	;	Surface	actuelle	:	26	903	ha	(selon	le	décret	en	vigueur).

Les métadonnées indiquent que cette aire protégée a été créée en 1958 comme Réserve Spéciale, puis ses limites ont été modifiées en 2015:

```{r}
show_cnlegis_for_pa(5023, pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

Après inspection visuelle des différentes sources disponibles, on retient MNP_2010 comme source des limites avant la modification de 2015. Cette géométrie représente le périmètre tel que géré par Madagascar National Parks avant l'entrée en vigueur du décret modificatif.

```{r}
plot_pa_sources(
  "Anjanaharibe_sud",
  sources = c("MNP_2010", "WDPA_2025")
)
```

Conformément aux règles de construction de la SAT, seule la géométrie immédiatement antérieure à la modification de 2015 est ajoutée comme amendement spatial.

```{r}
sat <- sat |>
  add_modif_sat(
    data = all_PAs_conso,
    decisions = pa_decisions,
    wdpa_name_or_id = "Anjanaharibe_sud",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    source_dataset_id = "MNP_2010",
    valid_from = "1958-10-28",
    notes = "Périmètre antérieur au décret modifiant (géométrie MNP_2010 retenue après vérification visuelle)."
  )
```

L'année de création de cette AP est 1958 (pas 2015 comme indiqué dans la WDPA 2025). On corrige STATUS_YR dans FAT.

```{r}
fat <- fat %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Anjanaharibe_sud",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    attributes = list(
      STATUS_YR = "1958"
    ),
    amendment_type = "correction",
    valid_from = "1958-10-28",
    notes = "WDPA incorrectly shows STATUS_YR=2015 (date of boundary modification). Actual creation was 1958 as Réserve Spéciale (Décret 58-12 du 28 octobre 1958)."
  )
```

## Ankarafantsika

Goodman et al. [-@goodman2018] indique pour cette AP:
Aspects	légaux	:	Gestionnaire	actuel	:	Madagascar	National	Parks	(MNP)	;
Gestion	antérieure	:	Direction	des	Eaux	et	Forêts	(Service	de	la	Protection
de	la	Nature	d’Antananarivo	et	le	Service	Provincial	des	Eaux	et	Forêts	de
Mahajanga)	;	Création	:	selon	le	Décret	du	31	décembre	1927	(Création	de
la	Réserve	Naturelle	Intégrale	n°	7)	;	Modification	de	statut	:	la	Réserve
Naturelle	Intégrale	d’Ankarafantsika	fut	créée	en	1927	et	ses	limites	ont	été
précisées	en	1966	avec	le	Décret	n°	66-242	du	1	juin	1966	(60	520	ha).
Parallèlement,	des	territoires	de	la	Forêt	d’Ankarafantsika	sur	les	districts
de	Marovoay	et	Ambato	Boeny	ont	été	classés	réserves	forestières	avec
l’Arrêté	du	24	décembre	1929	(75	000	ha).	De	plus,	le	Jardin	botanique
d’Ampijoroa	(district	d’Ambato	Boeny,	91	ha),	recensé	en	1969	par	le
Domaine	Forestier	National	est	devenu	la	Station	Forestière	d’Ampijoroa
(4974	ha)	en	1999	par	l’Arrêté	interministériel	n°	13-056/99	du	7	décembre
1999.	En	2002,	la	réserve	naturelle	intégrale	créée	en	1927	et	reclassée	en
1966,	les	réserves	forestières	instituées	en	1929	ainsi	que	la	Station
Forestière	d’Ampijoroa	sont	toutes	instituées	en	un	seul	parc	national
(Décret	n°	2002-798	du	7	août	2002,	130	000	ha).	Ce	dernier	subit	un
changement	de	limites	en	2015	sous	le	Décret	n°	2015-730	du	21	avril	2015	;
Dernière	modification	de	statut	:	suivant	le	Décret	n°	2015-730	du	21	avril
2015	;	Surface	actuelle	:	136	513	ha	(selon	le	décret	en	vigueur).


Les sources secondaires indiquent qu'Ankarafantsika a connu une évolution complexe, avec la création de la RNI #7 en 1927, l'établissement de réserves forestières adjacentes en 1929, et la consolidation de l'ensemble en parc national en 2002. L'extension de 2002 a fait l'objet d'une cartographie détaillée par Conservation International (voir Alonso & Shuldenberg 2002), mais les périmètres antérieurs à 2002 sont en cours de re-vectorisation et ne sont pas encore disponibles pour documentation dans la SAT.

```{r}
show_cnlegis_for_pa("Ankarafantsika", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Ankarafantsika")
```

- ANGAP 2002 = SAPM 2010:2019
- WDPA 2025 = SAPM 2010, 2017, 2024
- WDPA 2024 inclut la zone de protection

```{r}
plot_pa_sources(
  "Ankarafantsika",
  sources = c("WDPA_2025", "ANGAP_2002")
)
```

Les textes légaux identifient plusieurs décisions modificatives, notamment en 2002 (création du PN par consolidation) et 2015 (modification des limites). Après inspection visuelle, on retient ANGAP_2002 comme source du périmètre avant la modification de 2015.

```{r}
sat <- sat |>
  add_modif_sat(
    data = all_PAs_conso,
    decisions = pa_decisions,
    wdpa_name_or_id = "Ankarafantsika",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    source_dataset_id = "ANGAP_2002",
    valid_from = "2002-08-07",
    notes = "Périmètre 2002-2015 avant modification des limites (géométrie ANGAP_2002 retenue après vérification visuelle). Périmètres pré-2002 en cours de re-vectorisation."
  )
```

L'année de création de cette AP est 1927 (pas 2015 comme pourrait l'indiquer WDPA). La transformation en PN date de 2002. On documente le changement de statut dans FAT.

```{r}
fat <- fat %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Ankarafantsika",
    decision_filter = list(year = 2002, type_decision_pattern = "modifiant"),
    attributes = list(
      DESIG = "Réserve Naturelle Intégrale",
      DESIG_ENG = "Strict Nature Reserve",
      DESIG_TYPE = "National",
      IUCN_CAT = "Ia"
    ),
    amendment_type = "status_change",
    valid_from = "1966-06-01",
    secondary_reference = "Alonso & Shuldenberg 2002",
    notes = "RNI #7 (+ forest reserves + Station Forestière Ampijoroa) consolidated into PN in 2002 (Décret 2002-798 du 7 août 2002). Major boundary expansion."
  ) %>%
  add_modif_fat(
    decisions = pa_decisions,
    wdpa_name_or_id = "Ankarafantsika",
    decision_filter = list(year = 2015, type_decision_pattern = "modifiant"),
    attributes = list(
      STATUS_YR = "1927"
    ),
    amendment_type = "correction",
    valid_from = "1927-12-31",
    notes = "WDPA may show STATUS_YR=2002 or 2015. Actual creation was 1927 as RNI #7 (Décret du 31 décembre 1927)."
  )
```

## Bemaraha 

```{r}
show_cnlegis_for_pa(303702, pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name(303702)
```

- ANGAP 2002 (périmètre Sud) = WDPA 2010:2019
- ANGAP 2002 (périmètre Nord) 
- ANGAP 2002 (très petit périmètre centre) dans aucun autre


> Ajouter SAPM 2010 ou version MNP


```{r}
plot_pa_sources(
  303702,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Beza Mahafaly

```{r}
show_cnlegis_for_pa(10634, pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Beza Mahafaly")
```

```{r}
plot_pa_sources(
  10634,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Cap Sainte Marie

```{r}
show_cnlegis_for_pa(5041, pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Cap Sainte Marie")
```

```{r}
plot_pa_sources(
  5041,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Kirindy Mite

```{r}
show_cnlegis_for_pa(303700), pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Kirindy Mite")
```

```{r}
plot_pa_sources(
  303700,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Mangerivola

```{r}
show_cnlegis_for_pa(5038, pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Mangerivola")
```

```{r}
plot_pa_sources(
  5038,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Manombo

```{r}
show_cnlegis_for_pa("Manombo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Manombo")
```

```{r}
plot_pa_sources(
  5028,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Manongarivo

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Manongarivo")
```

```{r}
plot_pa_sources(
  5026,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Mantadia

```{r}
show_cnlegis_for_pa("Mantadia", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Mantadia")
```

```{r}
plot_pa_sources(
  26070,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Marojejy

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Marojejy")
```

```{r}
plot_pa_sources(
  2305,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Montagne d'Ambre

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Montagne d'Ambre")
```

```{r}
plot_pa_sources(
  2314,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Namoroka

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Namoroka")
```

```{r}
plot_pa_sources(
  2309,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Nosy Mangabe

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Nosy Mangabe")
```

```{r}
plot_pa_sources(
  5039,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Tsimanampesotse

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Tsimanampesotse")
```

```{r}
plot_pa_sources(
  2307,
  sources = c("WDPA_2025") # Update after visual inspection
)
```

## Zahamena

```{r}
show_cnlegis_for_pa("Manongarivo", pa_decisions) %>%
  select(
    date_texte,
    type_texte,
    num_texte,
    type_decision,
    id_texte,
    objet_texte
  )
```

```{r}
#| echo: false
#| eval: false
visualize_pa_by_name("Zahamena")
```


```{r}
plot_pa_sources(
  354013,
  sources = c("WDPA_2025") # Update after visual inspection
)
```