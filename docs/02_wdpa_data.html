<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Données des aires protégées à Madagascar - 3&nbsp; Exploration of WDPA historical data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03_legal_docs.html" rel="next">
<link href="./01_sapm_data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02_wdpa_data.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploration of WDPA historical data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Données des aires protégées à Madagascar</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/BETSAKA/conservation-dynamic-madagascar" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Conserver l’histoire des aires protégées à Madagascar : un modèle de données dynamique (2000-2024)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_sapm_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Harmonisation des données SAPM</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_wdpa_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploration of WDPA historical data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_legal_docs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Création d’une base réglementaire à partir de CNLEGIS</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_combination_algo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Aires protégées présentes en 2017 qui n’apparaîssent plus en 2024</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_visual_verif.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">05_visual_verif.html</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#creation-wdpa-global-historical-database-2010-2024" id="toc-creation-wdpa-global-historical-database-2010-2024" class="nav-link active" data-scroll-target="#creation-wdpa-global-historical-database-2010-2024"><span class="header-section-number">3.1</span> Creation WDPA global historical database 2010-2024</a></li>
  <li><a href="#creation-dune-base-wdpa-pour-madagascar-pour-2010-2024" id="toc-creation-dune-base-wdpa-pour-madagascar-pour-2010-2024" class="nav-link" data-scroll-target="#creation-dune-base-wdpa-pour-madagascar-pour-2010-2024"><span class="header-section-number">3.2</span> Creation d’une base WDPA pour Madagascar pour 2010-2024</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exploration of WDPA historical data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="creation-wdpa-global-historical-database-2010-2024" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="creation-wdpa-global-historical-database-2010-2024"><span class="header-section-number">3.1</span> Creation WDPA global historical database 2010-2024</h2>
<p>Nous avons développé un jeu de données spatio-temporel consolidant les données mondiales publiées par la World Database on Protected Areas (WDPA) depuis 2010. Nous avons compilé un jeu de données par an, en prenant pour référence le mois d’octobre ou, lorsque les données d’octobre n’étaient pas disponibles, le mois le plus proche.</p>
<p>Les sources ont été obtenues grâce à une recherche approfondie dans les archives pour récupérer les enregistrements historiques publiés par la WDPA, puisque seules les données les plus récentes sont disponibles publiquement sur protectedplanet.net. Google Earth Engine archive les données depuis 2017, et nous avons trouvé les données pour les années 2010 à 2016 dans le dépôt public AWS de l’UNEP-WCMC.</p>
<p>Les schémas des données ont évolué au fil du temps, et nous avons entrepris des efforts d’harmonisation pour aligner les attributs entre les différentes versions du jeu de données.</p>
<p>Le résultat est un jeu de données comprenant 2 721 134 enregistrements annuels d’aires protégées pour le monde entier. Les géométries des aires protégées sont complexes et représentent plus de 95 % du volume des données. La déduplication de ce nombre d’observations est une opération computationnellement intensive. Nous utilisons l’algorithme Blake3, une fonction de hachage cryptographique déterministe qui produit systématiquement la même valeur de hachage pour des données identiques, ce qui le rend extrêmement efficace pour la déduplication des données. Cet algorithme, l’un des plus performants disponibles, est implémenté en C dans notre code. Les hachages produits par Blake3 servent de clés pour séparer les données attributaires des données spatiales.</p>
<p>Ainsi, nous avons obtenu deux fichiers parquet contenant toutes les données WDPA des 15 dernières années pour 365 592 aires protégées : un fichier contenant 2 721 134 enregistrements annuels d’attributs des aires protégées (190 Mo) et un autre contenant 1 425 023 géométries spatiales uniques (13,9 Go).</p>
</section>
<section id="creation-dune-base-wdpa-pour-madagascar-pour-2010-2024" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="creation-dune-base-wdpa-pour-madagascar-pour-2010-2024"><span class="header-section-number">3.2</span> Creation d’une base WDPA pour Madagascar pour 2010-2024</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geoarrow)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load parquet and convert to sf</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>wdpa_mdg <span class="ot">&lt;-</span> <span class="fu">read_parquet</span>(<span class="st">"data/ISO3_ref=MDG/part-0.parquet"</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">geometry =</span> <span class="fu">st_as_sfc</span>(geometry))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(wdpa_mdg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'sf' and 'data.frame':  1775 obs. of  36 variables:
 $ WDPAID        : int  1299 2303 2305 2306 2307 2308 2309 2310 2311 2312 ...
 $ WDPA_PID      : Factor w/ 347909 levels "0","1","10","100",..: 9478 54520 54524 54526 54527 54528 54531 54539 54546 54553 ...
 $ PA_DEF        : Factor w/ 2 levels "0","1": 2 2 2 2 2 2 2 2 2 2 ...
 $ NAME          : Factor w/ 496546 levels " Lac des Oiseaux",..: 44584 44033 252844 416588 416685 44132 275339 60332 231579 178037 ...
 $ ORIG_NAME     : Factor w/ 498513 levels " Lac des Oiseaux",..: 43673 43148 248610 409772 409864 43243 270345 59430 227450 176569 ...
 $ DESIG         : Factor w/ 11750 levels "- Íåò äàííûõ -",..: 5342 5342 5342 9579 5342 5342 5342 9579 5342 5342 ...
 $ DESIG_ENG     : Factor w/ 3300 levels "§3 protected habitats (all lakes, bogs, streams, heaths and meadows etc.)",..: 1522 1522 1522 2894 1522 1522 1522 2894 1522 1522 ...
 $ DESIG_TYPE    : Factor w/ 5 levels "ABNJ","International",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ IUCN_CAT      : Factor w/ 12 levels "I","Ia","Ib",..: 4 4 4 2 4 4 11 2 4 4 ...
 $ INT_CRIT      : Factor w/ 391 levels "(i)","(i) (ii)",..: 388 388 388 388 388 388 388 388 388 388 ...
 $ MARINE        : Factor w/ 3 levels "0","1","2": 1 1 1 1 1 1 1 1 2 1 ...
 $ REP_M_AREA    : num  0 0 0 0 0 0 0 0 0.21 0 ...
 $ GIS_M_AREA    : num  0 0 0 0 0 ...
 $ REP_AREA      : num  1695 872 753 1491 2630 ...
 $ GIS_AREA      : num  1697 872 753 1492 2632 ...
 $ NO_TAKE       : Factor w/ 6 levels "All","None","Not applicable",..: 4 4 4 4 4 4 4 4 5 4 ...
 $ NO_TK_AREA    : num  0 0 0 0 0 0 0 0 0 0 ...
 $ STATUS        : Factor w/ 13 levels "Adopted","Designated",..: 2 2 2 2 2 2 2 2 2 2 ...
 $ STATUS_YR     : int  1927 1939 1952 1927 1927 1927 1927 1927 1927 1962 ...
 $ GOV_TYPE      : Factor w/ 58 levels "Co-managed Protected Areas",..: 43 43 43 26 43 43 43 26 15 43 ...
 $ OWN_TYPE      : Factor w/ 12 levels "Communal","Community",..: 9 9 9 9 9 9 9 9 9 9 ...
 $ MANG_AUTH     : Factor w/ 17025 levels "\n","\nEnte Parco Di Montemarcello Magra\n\n",..: 10703 10703 10703 10703 10703 10703 10703 10703 10703 10703 ...
 $ MANG_PLAN     : Factor w/ 7240 levels " "," http://www.boe.es/boe/dias/2011/09/14/pdfs/BOE-A-2011-14661.pdf",..: 6834 6834 6834 6834 6834 6834 6834 6834 6834 6834 ...
 $ VERIF         : Factor w/ 4 levels "Expert Verified",..: 4 4 4 4 4 4 4 4 4 4 ...
 $ METADATAID    : int  390 390 390 390 390 390 390 390 390 390 ...
 $ SUB_LOC       : Factor w/ 4878 levels "ABNJ","AD-02",..: 3189 3189 3189 3189 3189 3189 3189 3189 3189 3189 ...
 $ PARENT_ISO_old: Factor w/ 39 levels "ABNJ","AIA","ANT",..: NA NA NA NA NA NA NA NA NA NA ...
 $ ISO3_old      : Factor w/ 32 levels "ABNJ","ALA","ANT",..: NA NA NA NA NA NA NA NA NA NA ...
 $ SUPP_INFO     : Factor w/ 3 levels "https://www.novascotia.ca/nse/protectedareas/wa_eiggmountain.asp",..: 2 2 2 2 2 2 2 2 2 2 ...
 $ CONS_OBJ      : Factor w/ 2 levels "Not Applicable",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ data_year     : int  2024 2024 2024 2024 2024 2024 2024 2024 2024 2024 ...
 $ ISO3          : Factor w/ 264 levels "ABNJ","ABW","AFG",..: 156 156 156 156 156 156 156 156 156 156 ...
 $ PARENT_ISO    : Factor w/ 216 levels "ABNJ","AFG","AGO",..: 128 128 128 128 128 128 128 128 128 128 ...
 $ COUNTRY_old   : Factor w/ 240 levels "ABNJ","ABNJ - High Seas",..: NA NA NA NA NA NA NA NA NA NA ...
 $ data_month    : int  NA NA NA NA NA NA NA NA NA NA ...
 $ geometry      :sfc_MULTIPOLYGON of length 1775; first list element: List of 16
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16.1 ...
  ..$ :List of 1
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16.1 ...
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16.1 ...
  ..$ :List of 1
  .. ..$ : num [1:9, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16.1 ...
  ..$ :List of 1
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16.1 ...
  ..$ :List of 1
  .. ..$ : num [1:10, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:6, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16.1 ...
  ..$ :List of 1
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:6, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:9, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  ..$ :List of 1
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16 ...
  ..$ :List of 232
  .. ..$ : num [1:263, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:18, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:7, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:9, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:25, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:11, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:7, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:5, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:5, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:21, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:5, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:20, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16 ...
  .. ..$ : num [1:7, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:9, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:7, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:7, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:7, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:16, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:5, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:7, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:25, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:4, 1:2] 47.2 47.2 47.2 47.2 -16 ...
  .. ..$ : num [1:5, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:7, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16 ...
  .. ..$ : num [1:10, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:18, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:15, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16.1 ...
  .. ..$ : num [1:6, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:4, 1:2] 47.1 47.1 47.1 47.1 -16.1 ...
  .. ..$ : num [1:5, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:5, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:7, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:11, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:6, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:5, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:7, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:7, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:6, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:4, 1:2] 47 47 47 47 -16.1 ...
  .. ..$ : num [1:4, 1:2] 47 47 47 47 -16.1 ...
  .. ..$ : num [1:4, 1:2] 47 47 47 47 -16.1 ...
  .. ..$ : num [1:5, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:4, 1:2] 47 47 47 47 -16.1 ...
  .. ..$ : num [1:4, 1:2] 47 47 47 47 -16.1 ...
  .. ..$ : num [1:9, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:9, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:4, 1:2] 46.9 46.9 46.9 46.9 -16.1 ...
  .. ..$ : num [1:4, 1:2] 46.9 46.9 46.9 46.9 -16.1 ...
  .. ..$ : num [1:6, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:15, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:5, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:6, 1:2] 46.8 46.8 46.8 46.9 46.9 ...
  .. ..$ : num [1:32, 1:2] 47.3 47.3 47.3 47.3 47.3 ...
  .. ..$ : num [1:8, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:9, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:24, 1:2] 47.3 47.3 47.3 47.3 47.3 ...
  .. ..$ : num [1:7, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:7, 1:2] 47.3 47.3 47.3 47.3 47.3 ...
  .. ..$ : num [1:22, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:4, 1:2] 46.8 46.8 46.8 46.8 -16.2 ...
  .. ..$ : num [1:15, 1:2] 47.3 47.3 47.3 47.3 47.3 ...
  .. ..$ : num [1:10, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:4, 1:2] 46.8 46.8 46.8 46.8 -16.2 ...
  .. ..$ : num [1:7, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:9, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:9, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:19, 1:2] 47.3 47.3 47.3 47.3 47.3 ...
  .. ..$ : num [1:4, 1:2] 46.8 46.8 46.8 46.8 -16.2 ...
  .. ..$ : num [1:5, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:5, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:6, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:163, 1:2] 47.2 47.2 47.2 47.2 47.2 ...
  .. ..$ : num [1:360, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:128, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:145, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:173, 1:2] 47.1 47.1 47.1 47.1 47.1 ...
  .. ..$ : num [1:28, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:47, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:19, 1:2] 47 47 47 47 47 ...
  .. ..$ : num [1:47, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:12, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:14, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:18, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:29, 1:2] 46.9 46.9 46.9 46.9 46.9 ...
  .. ..$ : num [1:8, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:8, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:6, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:39, 1:2] 46.6 46.6 46.6 46.6 46.6 ...
  .. ..$ : num [1:6, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. ..$ : num [1:11, 1:2] 46.8 46.8 46.8 46.8 46.8 ...
  .. .. [list output truncated]
  ..- attr(*, "class")= chr [1:3] "XY" "MULTIPOLYGON" "sfg"
 - attr(*, "sf_column")= chr "geometry"
 - attr(*, "agr")= Factor w/ 3 levels "constant","aggregate",..: NA NA NA NA NA NA NA NA NA NA ...
  ..- attr(*, "names")= chr [1:35] "WDPAID" "WDPA_PID" "PA_DEF" "NAME" ...</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculer le nombre d'aires protégées par année</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ap_per_year <span class="ot">&lt;-</span> wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_year) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Number_of_APs =</span> <span class="fu">n</span>())</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculer la surface totale par année</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>area_per_year <span class="ot">&lt;-</span> wdpa_mdg <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(data_year) <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Area =</span> <span class="fu">sum</span>(GIS_AREA, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphique : Nombre d'aires protégées par année</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ap_per_year, <span class="fu">aes</span>(<span class="at">x =</span> data_year, <span class="at">y =</span> Number_of_APs)) <span class="sc">+</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Nombre d'aires protégées par année"</span>,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Année"</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Nombre d'AP"</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="02_wdpa_data_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphique : Surface totale des aires protégées par année</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(area_per_year, <span class="fu">aes</span>(<span class="at">x =</span> data_year, <span class="at">y =</span> Total_Area)) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Surface totale des aires protégées par année"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Année"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Surface totale (ha)"</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="02_wdpa_data_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./01_sapm_data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Harmonisation des données SAPM</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03_legal_docs.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Création d’une base réglementaire à partir de CNLEGIS</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>